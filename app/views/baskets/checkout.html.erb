<!-- <div class="container mt-5 content">
  <h1 class="text-center pb-3">Thank you for choosing us!</h1>
  <hr>
    <div class="row">
      <% @basket.orders.each do |order| %>
        <div class="col-12 col-md-6 offset-lg-3">
          <div class="order-item m-2">
            <%= cl_image_tag order.product.photo.key, width: 400, height: 300, crop: :fit %>
            <div class="order-item-infos">
              <h2 class= "mb-3"><%= order.product.name %></h2>
              <p><%= order.quantity %></p>
              <p style="font-size: 16px;">R$ <%= number_with_precision(order.product.price, precision: 2, separator: ',', delimiter: '.') %></p>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <div class="d-flex justify-content-center pb-3">
          <%= link_to 'Back', products_path, class: "btn btn-outline-primary my-3" %>
    </div>
</div>
 -->

<div class="wrapper bg-white">
    <div class="d-flex flex-column justify-content-center align-items-center p-3" id="order-heading">
        <div class="text-uppercase">
            <p>Checkout details</p>
        </div>
        <div >
            <p>Order  <b class="text-dark">#12615 </b></p>
        </div>
        <%= link_to products_path do %>
          <div class="btn close text-white"> &times; </div>
        <% end %>
    </div>
    <div class="table-responsive" style="height: 320px;">
        <table class="table table-borderless">
            <thead>
                <tr class="text-uppercase text-muted">
                  <div class="row">
                    <% price = 0 %>
                    <% count =0 %>
                    <% @basket.orders.each do |order| %>

                      <div class="col-12 col-md-12  justify-content-center">
                        <div class="d-flex order-item m-1 justify-content-between" style=" height: 48px;">
                          <%= cl_image_tag order.product.photo.key, width: 80, height: 30, crop: :fit %>
                          <div class="d-flex justify-content-between order-item-infos " style="width: 100%;">
                            <p class= "mb-3 font-weight-bold"><%= order.product.name.capitalize %>s</p>
                            <p class="mr-3 font-weight-bold"> R$ <%= number_with_precision(order.product.price, precision: 2, separator: ',', delimiter: '.') %></p>
                          </div>
                        </div>
                      </div>
                     <% price += order.product.price %>
                     <% count +=1 %>
                    <% end %>
                  </div>
                    <th scope="col" class="align-items-center text-dark">Your basket is awesome </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <!-- <th scope="row">Frequency:  </th> -->
                    <td class="text-left">Total</td>
                    <td class="text-right pr-5"><b>$  <%= number_with_precision(price, precision: 2, separator: ',', delimiter: '.') %> </b></td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="d-flex justify-content-start align-items-center list py-1">
        <div class="mx-3"> <img src="https://images.pexels.com/photos/206959/pexels-photo-206959.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" alt="apple" class="rounded-circle" width="30" height="30"> </div>
        <div> Your basket summary  </div>
    </div>

    <div class="pt-2 border-bottom mb-3"></div>
    <div class="d-flex justify-content-start align-items-center pl-3">
        <div class="text-muted">Payment Method</div>
        <div class="ml-auto"> <img src="https://www.freepnglogos.com/uploads/mastercard-png/mastercard-logo-logok-15.png" alt="" width="30" height="30"> <label>Mastercard ******5342</label> </div>
    </div>
    <div class="d-flex justify-content-start align-items-center py-1 pl-3">
        <div class="text-muted">Shipping</div>
        <div class="ml-auto"> <label>Free</label> </div>
    </div>
    <div class="d-flex justify-content-start align-items-center pb-4 pl-3 border-bottom">
        <div class="text-muted"> <button class="text-white btn">20% Discount</button> </div>
        <% final_price = price * 0.8 %>
        <% discount = price * 0.2 %>
        <div class="ml-auto price">R$ <%= number_with_precision(discount, precision: 2, separator: ',', delimiter: '.') %></div>
    </div>
    <div class="d-flex justify-content-start align-items-center pl-3 py-3 mb-4 border-bottom">
        <div class="text-muted"> Today's Total </div>
        <div class="ml-auto h5">R$ <%= number_with_precision(final_price, precision: 2, separator: ',', delimiter: '.') %></div>
    </div>
    <div class="row border rounded p-1 my-3">
        <div class="col-md-6 py-3">
            <div class="d-flex flex-column align-items start"> <b>Billing Address</b>
                <p class="text-justify pt-2">Selina</p>
                <p class="text-justify"> Rio de Janeiro</p>
            </div>
        </div>
        <div class="col-md-6 py-3">
            <div class="d-flex flex-column align-items start"> <b>Shipping Address</b>
                <p class="text-justify pt-2">Selina</p>
                <p class="text-justify"> Rio de Janeiro</p>
            </div>
        </div>
    </div>
    <div class="pl-3 font-weight-bold">Summary </div>
    <div class="d-sm-flex justify-content-between rounded my-3 subscriptions">
        <div> <b>#12615</b> </div>
        <div> Today: <%= DateTime.current.to_date %> </div>
        <div>Status: Processing</div>
        <div> Total: <b> R$ <%= number_with_precision(final_price, precision: 2, separator: ',', delimiter: '.') %>  for <%= count %> items</b> </div>
    </div>
      <div class ="d-flex justify-content-around mt-1">
        <div class="d-flex justify-content-start pb-1 ">
          <button type="button" class="btn" data-toggle="modal" data-target="#CheckoutModal">
            Please Confirm your Purchase
           </button>
        </div>
      </div>
</div>


<!-- Modal -->
<div class="modal fade" id="CheckoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content b-radius-28 p-4">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">PAYMENT CONFIRMED!</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body justify-content-center">
        <h5>Congrats! You are participating actively to reduce wastes.</h5>
        <p>You'll receive your awesome basket tomorrow!</p>
      </div>
      <div class="modal-footer d-flex justify-content-around">
        <%= link_to basket_path, method: :delete, class:"btn btn-outline-primary" do %>
          Home
        <% end %>
      </div>
    </div>
  </div>
</div>


